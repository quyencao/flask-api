{% extends "layout.html" %}

{% block body %}
    <div ng-controller="accountInqueryController" ng-init="initializeController()">
        <button type="button" class="btn btn-secondary" ng-click="isCollapsed = !isCollapsed">Search</button>
        <hr>
        <div uib-collapse="isCollapsed" class="mb-3">
            <div class="card">
                <div class="card-body">
                    <div class="form-group">
                        <input class="form-control form-control-sm" type="text" placeholder="Search by first name"
                            ng-model="firstName" ng-change="searchAccount()">
                    </div>
                    <div class="form-group">
                        <input class="form-control form-control-sm" type="text" placeholder="Search by last name"
                            ng-model="lastName" ng-change="searchAccount()">
                    </div>
                    <div class="form-group">
                        <input class="form-control form-control-sm" type="text" placeholder="Search by email"
                            ng-model="email" ng-change="searchAccount()">
                    </div>
                    <div class="form-group">
                        <input class="form-control form-control-sm" type="text" placeholder="Search by balance"
                            ng-model="balance" ng-change="searchAccount()" number-only>
                    </div>
                    <div class="form-group">
                        <select class="form-control form-control-sm" ng-model="gender" ng-change="searchAccount()">
                          <option value="-1">Search by gender</option>
                          <option value="M">Male</option>
                          <option value="F">Female</option>
                        </select>
                    </div>
                </div>
                <div class="card-footer">
                    <button class="btn btn-sm btn-warning" ng-click="reset()">Reset</button>
                </div>
            </div>
        </div>

        <table class="table table-bordered table-striped" style="margin-top: 100px">
            <thead>
                <tr>
                    <th>Account Number</th>
                    <th>Balance</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Email</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in accounts">
                    <td>{{'{{item.account_number}}'}}</td>
                    <td>{{'{{item.balance}}'}}</td>
                    <td>{{'{{item.firstname}}'}}</td>
                    <td>{{'{{item.lastname}}'}}</td>
                    <td>{{'{{item.email}}'}}</td>
                    <td>
                        <button class="btn btn-sm btn-warning" ng-click="openModal($index)">Edit</button>
                    </td>
                </tr>
            </tbody>
        </table>

        <ul uib-pagination total-items="totalAccounts"
            ng-model="currentPageNumber"
            max-size="5"
            class="pagination"
            boundary-link-numbers="true"
            ng-change="pageChanged()"></ul>

        <button class="btn btn-primary btn-sm" ng-click="openModal()">Create Account</button>

    </div>

   <div class="account-modal">
        <script type="text/ng-template" id="accountMaintainance.html">
            <div class="modal-header">
                <h3 class="modal-title" id="modal-title">{{'{{title}}'}}</h3>
            </div>
            <div class="modal-body" id="modal-body">
                <form name="account_form" novalidate>
                  <div class="form-group" ng-if="action">
                    <label>Account Number</label>
                    <input type="text" class="form-control" name="account_number"
                           ng-model="account.account_number"
                           ng-required="true"
                           number-only>
                     <small class="form-text text-muted error"
                           ng-show="account_form.account_number.$invalid && account_form.account_number.$touched">You must enter valid account number.</small>
                  </div>
                  <div class="form-group">
                    <label>Balance</label>
                    <input type="text" class="form-control" name="balance"
                           ng-model="account.balance"
                           ng-required="true"
                            number-only>
                     <small class="form-text text-muted error"
                           ng-show="account_form.balance.$invalid && account_form.balance.$touched">You must enter valid balance.</small>
                  </div>
                  <div class="form-group">
                    <label>First Name</label>
                    <input type="text" class="form-control" name="firstname"
                           ng-model="account.firstname"
                           ng-required="true">
                    <small class="form-text text-muted error"
                           ng-show="account_form.firstname.$invalid && account_form.firstname.$touched">You must enter first name.</small>
                  </div>
                  <div class="form-group">
                    <label>Last Name</label>
                    <input type="text" class="form-control" name="lastname"
                           ng-model="account.lastname"
                           ng-required="true">
                      <small class="form-text text-muted error"
                           ng-show="account_form.lastname.$invalid && account_form.lastname.$touched">You must enter last name.</small>
                  </div>
                  <div class="form-group">
                    <label>Age</label>
                    <input type="number" class="form-control" name="age" max="100" min="0"
                           ng-model="account.age"
                           ng-required="true">
                     <small class="form-text text-muted error"
                           ng-show="account_form.age.$invalid && account_form.age.$touched">You must enter your age.</small>
                  </div>
                  <div class="form-group">
                    <label>Gender</label>
                    <select class="form-control" name="gender"
                            ng-model="account.gender"
                            ng-required="true">
                      <option value="M">Male</option>
                      <option value="F">Female</option>
                    </select>
                    <small class="form-text text-muted error"
                           ng-show="account_form.gender.$invalid && account_form.gender.$touched">You must select your gender.</small>
                  </div>
                  <div class="form-group">
                    <label>Address</label>
                    <input type="text" class="form-control"
                           ng-model="account.address"
                           ng-required="true">
                      <small class="form-text text-muted error"
                           ng-show="account_form.employer.$invalid && account_form.employer.$touched">You must enter your address.</small>
                  </div>
                  <div class="form-group">
                    <label>Employer</label>
                    <input type="text" class="form-control" name="employer"
                           ng-model="account.employer"
                           ng-required="true">
                      <small class="form-text text-muted error"
                           ng-show="account_form.employer.$invalid && account_form.employer.$touched">You must enter last name.</small>
                  </div>
                  <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-control" name="email"
                           ng-model="account.email"
                           ng-required="true">
                      <small class="form-text text-muted error"
                           ng-show="account_form.email.$invalid && account_form.email.$touched">You must enter valid email.</small>
                  </div>
                  <div class="form-group">
                    <label>City</label>
                    <input type="text" class="form-control" name="city"
                           ng-model="account.city"
                            ng-required="true">
                      <small class="form-text text-muted error"
                           ng-show="account_form.city.$invalid && account_form.city.$touched">You must enter your city.</small>
                  </div>
                  <div class="form-group">
                    <label>State</label>
                    <input type="text" class="form-control" name="state"
                           ng-model="account.state"
                           ng-required="true">
                     <small class="form-text text-muted error"
                           ng-show="account_form.state.$invalid && account_form.state.$touched">You must enter your state.</small>
                  </div>
                </form>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary" type="button" ng-click="save()">OK</button>
                <button class="btn btn-warning" type="button" ng-click="close()">Cancel</button>
            </div>
        </script>
    </div>
{% endblock %}