{% extends "layout.html" %}

{% block body %}
    <div class="container" ng-controller="accountController">
        <button class="btn btn-primary btn-sm" ng-click="showModal()">Create Account</button>
        <table class="table">
            <thead>
                <tr>
                    <th>Account Number</th>
                    <th>Balance</th>
                    <th>First Name</th>
                    <th>Last Name</th>
                    <th>Age</th>
                    <th>Gender</th>
                    <th>Address</th>
                    <th>Employer</th>
                    <th>Email</th>
                    <th>City</th>
                    <th>State</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr ng-repeat="item in accounts">
                    <td>{{'{{item.account_number}}'}}</td>
                    <td>{{'{{item.balance}}'}}</td>
                    <td>{{'{{item.firstname}}'}}</td>
                    <td>{{'{{item.lastname}}'}}</td>
                    <td>{{'{{item.age}}'}}</td>
                    <td>{{'{{item.gender}}'}}</td>
                    <td>{{'{{item.address}}'}}</td>
                    <td>{{'{{item.employer}}'}}</td>
                    <td>{{'{{item.email}}'}}</td>
                    <td>{{'{{item.city}}'}}</td>
                    <td>{{'{{item.state}}'}}</td>
                    <td>
                        <button class="btn btn-danger btn-sm" ng-click="deleteAccount($index)">Delete</button>
                    </td>
                    <td>
                        <button class="btn btn-warning btn-sm" ng-click="showModal($index)">Update</button>
                    </td>
                </tr>
            </tbody>
        </table>

        <!--<form name="search" novalidate>-->
          <!--<div class="form-group">-->
            <!--<label>Account Number</label>-->
            <!--<input type="number" class="form-control"-->
                   <!--ng-model="search_criteria.account_number">-->
          <!--</div>-->
          <!--<button class="btn btn-primary btn-sm" ng-click="searchAccount()">Search Account</button>-->
        <!--</form>-->

        <!--<nav aria-label="Page navigation example">-->
          <!--<ul class="pagination">-->
             <!--<li class="page-item" ng-class="{'disabled': pagination.current_page == 1}">-->
              <!--<a class="page-link" href="#" aria-label="Previous" ng-click="getPage({{ 'pagination.prev_page' }})">-->
                <!--<span aria-hidden="true">&laquo;</span>-->
                <!--<span class="sr-only">Previous</span>-->
              <!--</a>-->
            <!--</li>-->
            <!--<li class="page-item" ng-repeat="page in pagination.pages" ng-class="{'page-item active': page == pagination.current_page}">-->
                <!--<a class="page-link" href="#" ng-click="getPage({{ 'page' }})">{{'{{page}}'}}</a>-->
            <!--</li>-->
             <!--<li class="page-item" ng-class="{'disabled': pagination.current_page == pagination.last_page}">-->
              <!--<a class="page-link" href="#" aria-label="Previous" ng-click="getPage({{ 'pagination.next_page' }})">-->
                <!--<span aria-hidden="true">&raquo;</span>-->
                <!--<span class="sr-only">Previous</span>-->
              <!--</a>-->
            <!--</li>-->
          <!--</ul>-->
        <!--</nav>-->
        <nav aria-label="Page navigation example">
          <ul class="pagination">
             <li class="page-item" ng-class="{'disabled': pagination.current_page == 1}">
              <a class="page-link" href="#" aria-label="Previous" ng-click="getPage({{ 'pagination.prev_page' }})">
                <span aria-hidden="true">&laquo;</span>
                <span class="sr-only">Previous</span>
              </a>
            </li>
            <li class="page-item" ng-repeat="page in pagination.pages track by $index" ng-class="{'active': page == pagination.current_page, 'disabled': page == -1}">
                <a class="page-link" href="#" ng-click="getPage({{ 'page' }})" ng-if="page != -1">{{'{{page}}'}}</a>
                <a class="page-link disabled" href="#" ng-if="page == -1">...</a>
            </li>
             <li class="page-item" ng-class="{'disabled': pagination.current_page == pagination.last_page}">
              <a class="page-link" href="#" aria-label="Previous" ng-click="getPage({{ 'pagination.next_page' }})">
                <span aria-hidden="true">&raquo;</span>
                <span class="sr-only">Previous</span>
              </a>
            </li>
          </ul>
        </nav>

        <div class="modal fade" id="account-modal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle" aria-hidden="true">
          <div class="modal-dialog" role="document">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title">{{ '{{account_update_create ? "Update" : "Create"}}' }} Account</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close" ng-click="hideModal()">
                  <span aria-hidden="true">&times;</span>
                </button>
              </div>
              <div class="modal-body">
                <form name="account_form" novalidate>
                  <div class="form-group" ng-if="!account_update_create">
                    <label>Account Number</label>
                    <input type="text" class="form-control" name="account_number"
                           ng-model="account_info.account_number"
                           ng-pattern="/^-?[0-9][^\.]*$/"
                           ng-required="true">
                     <small class="form-text text-muted error"
                           ng-show="account_form.account_number.$invalid && account_form.account_number.$touched">You must enter valid account number.</small>
                  </div>
                  <div class="form-group">
                    <label>Balance</label>
                    <input type="text" class="form-control" name="balance"
                           ng-model="account_info.balance"
                           ng-pattern="/^-?[0-9][^\.]*$/"
                           ng-required="true">
                     <small class="form-text text-muted error"
                           ng-show="account_form.balance.$invalid && account_form.balance.$touched">You must enter valid balance.</small>
                  </div>
                  <div class="form-group">
                    <label>First Name</label>
                    <input type="text" class="form-control" name="firstname"
                           ng-model="account_info.firstname"
                           ng-required="true">
                    <small class="form-text text-muted error"
                           ng-show="account_form.firstname.$invalid && account_form.firstname.$touched">You must enter first name.</small>
                  </div>
                  <div class="form-group">
                    <label>Last Name</label>
                    <input type="text" class="form-control" name="lastname"
                           ng-model="account_info.lastname"
                           ng-required="true">
                      <small class="form-text text-muted error"
                           ng-show="account_form.lastname.$invalid && account_form.lastname.$touched">You must enter last name.</small>
                  </div>
                  <div class="form-group">
                    <label>Age</label>
                    <input type="number" class="form-control" name="age" max="100" min="0"
                           ng-model="account_info.age"
                           ng-required="true">
                     <small class="form-text text-muted error"
                           ng-show="account_form.age.$invalid && account_form.age.$touched">You must enter your age.</small>
                  </div>
                  <div class="form-group">
                    <label>Gender</label>
                    <input type="text" class="form-control"
                           ng-model="account_info.gender">
                  </div>
                  <div class="form-group">
                    <label>Address</label>
                    <input type="text" class="form-control"
                           ng-model="account_info.address"
                           ng-required="true">
                  </div>
                  <div class="form-group">
                    <label>Employer</label>
                    <input type="text" class="form-control" name="employer"
                           ng-model="account_info.employer"
                           ng-required="true">
                      <small class="form-text text-muted error"
                           ng-show="account_form.employer.$invalid && account_form.employer.$touched">You must enter last name.</small>
                  </div>
                  <div class="form-group">
                    <label>Email</label>
                    <input type="email" class="form-control" name="email"
                           ng-model="account_info.email"
                           ng-required="true">
                      <small class="form-text text-muted error"
                           ng-show="account_form.email.$invalid && account_form.email.$touched">You must enter valid email.</small>
                  </div>
                  <div class="form-group">
                    <label>City</label>
                    <input type="text" class="form-control" name="city"
                           ng-model="account_info.city"
                            ng-required="true">
                      <small class="form-text text-muted error"
                           ng-show="account_form.city.$invalid && account_form.city.$touched">You must enter your city.</small>
                  </div>
                  <div class="form-group">
                    <label>State</label>
                    <input type="text" class="form-control" name="state"
                           ng-model="account_info.state"
                           ng-required="true">
                     <small class="form-text text-muted error"
                           ng-show="account_form.state.$invalid && account_form.state.$touched">You must enter your state.</small>
                  </div>
                </form>
              </div>
              <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-dismiss="modal" ng-click="hideModal()">Close</button>
                <button type="button" class="btn btn-primary" ng-click="save()">Save</button>
              </div>
            </div>
          </div>
        </div>
    </div>
{% endblock %}